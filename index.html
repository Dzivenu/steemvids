<!DOCTYPE html>
<html> <head>
  <title>steemvids.com : videos referenced on the steem network</title>
  <meta name="description" content="steemvids.com : videos referenced on the steem network"> <meta property="og:title" content="steem network videos steemit"> <meta property="og:site_name" content="steemvids.com">
  <meta property="og:description" content="steemvids.com : videos referenced on the steem network">
  <meta charset="UTF-8">
  <script src="jquery.min.js"></script>
  <script src="steem.min.js"></script>
  <script src="lity.min.js"></script>
  <link href="lity.min.css" rel="stylesheet">
  <style type="text/css">
    body {height:100%;}
    a {text-decoration:none;font-weight:bold; color:black;}
    a:hover {text-decoration:underline;}
    .yt { width:450px;height:320px;display:inline-block;padding:0px;margin:0px;color:white;background-color:white;float:left;}
    .yt a { color:white;}
    .ytfooter {display:block;background: rgba(0, 0, 0, 0.5); position: relative;float: left;padding:5px;top: 50%;left: 50%;transform: translate(-50%, -50%); border-radius:15px; }
    .scvote {display:inline-block;margin:0 auto;}
    #help {clear:both;padding:10px;display:none;}
    #error {display:none;}
    #results {vertical-align:top;width:100%;display:block;margin:0 auto;text-align:center;}
    #footer {position:relative;bottom:10px;vertical-align:bottom;clear:both;text-align:center;padding:10px;}
    #intro {font-weight:bold;}
    #path {border-radius:5px;border-color:#1A5099}
  </style>
  <script>
  var videosites = ["youtu.be","youtube.com","www.youtube.com"];

  function extractyt(url) {
    var regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    var match = url.match(regExp);
    if (match && match[2].length == 11) {
      return match[2];
    } else {
      return 0;
    }
  }

  function submitpath(){
    path = $('#path').val();
    checkpath(path);
  }

  function checkpath(path) {
    $('#path').val(path);
    $('#results').html('');
    $('#loader').fadeIn();
    steem.api.getState(path, function(err, result) {
      //console.log(result);
      var vidhistory = [0];
      for (var key in result.content) {
       if (result.content[key].json_metadata != "") {
         postjson = JSON.parse(result.content[key].json_metadata);
         if (postjson.hasOwnProperty("links")) {
           for (var link in postjson.links) {
            var domain = postjson.links[link].replace('http://','').replace('https://','').split(/[/?#]/)[0];
            if ($.inArray(domain, videosites) !== -1) {
              ytid = extractyt(postjson.links[link]);
              if ($.inArray(ytid, vidhistory) == -1) {
                  vidhistory.push(ytid);
                  var author = result.content[key].author;
                  var reputation = steem.formatter.reputation(result['accounts'][author].reputation);
                  var voteframe = '<iframe src="https://steemconnect.com/embed/vote?author='+result.content[key].author+'&amp;permlink='+result.content[key].permlink+'" allowtransparency="true" scrolling="no" class="scvote" width="50" height="20" frameborder="0"></iframe>';
                  var vidframe = '<span id="yt'+ytid+'" class="yt" style="background-image:url(https://img.youtube.com/vi/'+ytid+'/0.jpg);"><a href="https://youtu.be/'+ytid+'" data-lity><div class="ytfooter">@'+author+' ('+reputation+')<br /><br />&quot;'+result.content[key].title+'&quot;</a><br /><br /><small><a href="https://steemit.com/@'+author+'/'+result.content[key].permlink+'">View on Steemit</a></small><br />'+voteframe+'</div></span>';
                  $('#results').append(vidframe);
                  $('#yt'+ytid).fadeIn();
                }
                }
              }
            }
           }
         }
       });
    $('#loader').fadeOut();
    }


  $(document).ready(function() {
     $('#help').fadeIn();
     checkpath('/created/video');
  });

  </script>
  </head><body>
  <div id="container" style="margin:0 auto;text-align:center;">
    <span style="clear:both;display: inline-block; width: 8rem; height: 8rem;" is="null"><svg viewBox="0 0 28 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="steem"><path d="M4.22924444,3.23195745 C3.94488889,3.09004255 0.337866667,6.07148936 0.337866667,8.265 C0.332888889,11.2631064 4.54533333,18.0552766 5.25466667,20.6825532 C5.86506667,22.9359149 4.21928889,25.6403191 4.67164444,25.7631064 C5.0848,26.0284255 9.01475556,22.0486383 9.16782222,20.3518298 C9.36506667,17.6498936 4.57893333,9.77114894 4.19751111,7.73682979 C3.75511111,5.36253191 4.54782222,3.28502128 4.22924444,3.23195745 L4.22924444,3.23195745 L4.22924444,3.23195745 Z" id="Fill-1" fill="#1A5099"></path><path d="M13.2321778,0.130191489 C12.8700444,-0.0505957447 8.26871111,3.74778723 8.26871111,6.54844681 C8.26373333,10.3715106 13.6353778,19.0338723 14.5394667,22.3812128 C15.3172444,25.2546809 13.2197333,28.7038298 13.7934222,28.8580851 C14.3235556,29.1949787 19.3324444,24.1242979 19.5296889,21.9573191 C19.7823111,18.5131064 13.6764444,8.46738298 13.1904889,5.86910638 C12.6267556,2.84878723 13.6353778,0.197446809 13.2321778,0.130191489 L13.2321778,0.130191489 L13.2321778,0.130191489 Z" id="Fill-2" fill="#4BA2F2"></path><path d="M22.5238222,3.23195745 C22.2419556,3.09004255 18.6324444,6.07148936 18.6324444,8.265 C18.6280889,11.2631064 22.8399111,18.0552766 23.5498667,20.6825532 C24.1596444,22.9359149 22.5144889,25.6403191 22.9662222,25.7631064 C23.3818667,26.0284255 27.3124444,22.0486383 27.4630222,20.3518298 C27.6596444,17.6498936 22.8741333,9.77114894 22.4920889,7.73682979 C22.0503111,5.36253191 22.8424,3.28502128 22.5238222,3.23195745 L22.5238222,3.23195745 Z" id="Fill-3" fill="#1A5099"></path></g></g></svg></span><br />
    <img src="steemvids.png" id="logo" style="margin:0 auto;clear:both;">
    <p id="intro">Quick access to the latest videos referenced on the Steem blockchain!</p>
    <div id="help" style="display:none;">
      <p>Enter a path to search for youtube videos, for example :<br /><a href="#" onClick="checkpath('/trending');">trending</a> , <a href="#" onClick="checkpath('/promoted');">promoted</a> , <a href="#" onClick="checkpath('/created/video');">video</a> , <a href="#" onClick="checkpath('/created/openmic');">openmic</a> , <a href="#" onClick="checkpath('/created/music');">music</a> , <a href="#" onClick="checkpath('/created/gaming');">gaming</a> , <a href="#" onClick="checkpath('/created/news');">news</a> , <a href="#" onClick="checkpath('/created/truth');">truth</a> , <a href="#" onClick="checkpath('/created/pizzagate');">pizzagate</a></p>
    </div>
    <form id="pathform" onSubmit="checkpath($('#path').val());"><input type="text" id="path" value="/trending" style="text-align:center;"></form><br /><img src="loader.gif" id="loader" style="margin: 0 auto;clear:both;display:none;">
    <div id="error">
      No results!
    </div>
    <div id="results">

    </div>
  </div>
  <div id="footer">
    <small>Created by <a href="https://steemit.com/@ausbitbank">@ausbitbank</a> for steemit.<br /><a href="https://steemviz.com">steemviz</a> ~ <a href="https://steemcap.com">steemcap</a></small>
  </div>
  </body></html>
